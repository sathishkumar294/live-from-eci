(this["webpackJsonplive-from-eci"]=this["webpackJsonplive-from-eci"]||[]).push([[0],{416:function(t,e,n){},418:function(t,e,n){},566:function(t,e,n){},568:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n.n(c),s=n(54),r=n.n(s),i=(n(416),n(90)),o=n(579),u=(n(417),n(418),n(132)),d=n(583),l=n(576),j=n(577),b=n(580),f=n(380),h=n.n(f),O=n(18),x={cursor:"pointer"};function m(t){var e=t.states,n=t.candidates,a=t.constituencies,s=Object(c.useState)({states:[],constituencies:[],candidates:[]}),r=Object(i.a)(s,2),o=r[0],f=r[1],m=Object(c.useState)(3),p=Object(i.a)(m,2),g=p[0],v=p[1],y=Object(c.useState)(""),C=Object(i.a)(y,2),w=C[0],S=C[1];Object(c.useEffect)((function(){if(v(5),w){var t=w.toLowerCase().trim();f({states:[].concat(Object(u.a)(e.filter((function(e){return e.state.toLowerCase().startsWith(t)}))),Object(u.a)(e.filter((function(e){return!e.state.toLowerCase().startsWith(t)&&e.state.toLowerCase().includes(t)})))),candidates:[].concat(Object(u.a)(n.filter((function(e){return e.candidate.toLowerCase().startsWith(t)}))),Object(u.a)(n.filter((function(e){return!e.candidate.toLowerCase().startsWith(t)&&e.candidate.toLowerCase().includes(t)})))),constituencies:[].concat(Object(u.a)(a.filter((function(e){return e.constituency.toLowerCase().startsWith(t)}))),Object(u.a)(a.filter((function(e){return!e.constituency.toLowerCase().startsWith(t)&&e.constituency.toLowerCase().includes(t)}))))})}else f({states:e,candidates:n,constituencies:a})}),[w,e,a,n]);var L=function(t){var e=a.filter((function(e){return e.stateCode===t.code})).length,c=n.filter((function(e){return e.stateCode===t.code})).length;return"".concat(e," constituencies, ").concat(c," candidates")},I=function(t){var c=n.filter((function(e){return e.constituencyCode===t.code})).length,a=e.find((function(e){return e.code===t.stateCode}));return"".concat(c," candidates, ").concat(a.state)},k=function(t){var e=a.find((function(e){return e.code===t.constituencyCode&&e.stateCode===t.stateCode}));return e?"".concat(t.party," contesting from ").concat(e.constituency):(console.warn("Unknown constituency:",{candidate:t}),"".concat(t.party))},T=Object(O.jsx)("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:Object(O.jsx)(d.a,{onClick:function(){v(g+5),window.dispatchEvent(new Event("resize"))},children:"Load More"})});return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{justify:"center",children:Object(O.jsx)(j.a,{xs:24,md:8,children:Object(O.jsx)(h.a,{placeholder:"input search text",onSearch:S,enterButton:!0})})}),Object(O.jsxs)(l.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:[Object(O.jsx)(j.a,{xs:24,md:8,children:Object(O.jsx)(b.b,{itemLayout:"horizontal",dataSource:o.states.slice(0,g),renderItem:function(t){return Object(O.jsx)(b.b.Item,{onClick:function(){console.log("Go to state page")},style:x,children:Object(O.jsx)(b.b.Item.Meta,{description:L(t),title:t.state})})}})}),Object(O.jsx)(j.a,{xs:24,md:8,children:Object(O.jsx)(b.b,{itemLayout:"horizontal",dataSource:o.constituencies.slice(0,g),renderItem:function(t){return Object(O.jsx)(b.b.Item,{children:Object(O.jsx)(b.b.Item.Meta,{description:I(t),title:t.constituency})})}})}),Object(O.jsx)(j.a,{xs:24,md:8,children:Object(O.jsx)(b.b,{itemLayout:"horizontal",dataSource:o.candidates.slice(0,g),renderItem:function(t){return Object(O.jsx)(b.b.Item,{children:Object(O.jsx)(b.b.Item.Meta,{description:k(t),title:t.candidate})})}})})]}),Object(O.jsx)(l.a,{justify:"center",children:Object(O.jsxs)(j.a,{xs:12,md:6,children:[T,"\xa0"]})})]})}var p=n(584),g={float:"left",width:"120px",height:"31px",margin:"16px 24px 16px 0",fontWeight:"bold",color:"white",lineHeight:"31px"};function v(t){var e=t.page,n=t.setPage;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{style:g,children:"Live from ECI"}),Object(O.jsxs)(p.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[e],onClick:function(t){return n(t.key)},children:[Object(O.jsx)(p.a.Item,{children:"States"},"1"),Object(O.jsx)(p.a.Item,{children:"Map"},"2"),Object(O.jsx)(p.a.Item,{children:"Favorites"},"3"),Object(O.jsx)(p.a.Item,{children:"Search"},"4")]})]})}function y(t){var e=t.state;return Object(O.jsxs)("div",{children:["TODO: Show the state map of ",e.code]})}function C(){return Object(O.jsx)(y,{state:{code:"S22",name:"TN"}})}var w=n(581),S=n(385),L=n.n(S),I={url:function(t){return"https://results.eci.gov.in/Result2021/partywiseresult-".concat(t,".htm?st=").concat(t)}},k=n(399),T="https://fathomless-stream-86331.herokuapp.com",F=function(t){var e=k.b.loading("Loading state results...");return fetch(T+"/",{headers:{"Target-URL":t}}).then((function(t){return e(),t.text()})).catch((function(t){var e=k.b.warn("Unable to load state data");setTimeout(e,4e3)}))},W=function(){var t=k.b.loading("Loading ECI data...");return fetch(T+"/getCandidateData").then((function(t){return t.json()})).then((function(e){if(t(),e.success){var n=k.b.success("Data loaded");return setTimeout(n,3e3),e.data}var c=k.b.error(e.message);return setTimeout(c,4e3),{states:[],constituencies:[],candidates:[]}}))},E=n(386),P=n(387),M=n(388),D=n(402),z=n(400),A=n(582),B=function(t){Object(D.a)(n,t);var e=Object(z.a)(n);function n(){return Object(P.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.stateData,n=t.title,c=e.map((function(t){return{party:t.party,value:parseInt(t.value,10)}})),a=c.reduce((function(t,e){return t+e.value}),0),s={appendPadding:10,data:c,angleField:"value",colorField:"party",radius:1,innerRadius:.5,meta:{value:{formatter:function(t){return t}}},label:{type:"inner",offset:"-50%",style:{textAlign:"center"},autoRotate:!1,content:"{value}"},statistic:{title:{formatter:function(t){return t&&t.party?t.party:n}},content:{formatter:function(t){return t&&t.value||a}}},interactions:[{type:"element-selected"},{type:"element-active"}]};return Object(O.jsx)(A.a,Object(E.a)({},s))}}]),n}(a.a.Component);function N(t){var e=t.state,n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){F(I.url(e.code)).then((function(t){var e=/<table ([\w\W]*)>([\w\W]*)<\/table>/gm.exec(t)[0],n=L.a.parse(e).results[0].filter((function(t){return 4===Object.keys(t).length&&"Total"!==t.Party})).map((function(t){return{party:t.Party,value:t.Total}}));console.log(n),r(n)}))}),[e.code]),Object(O.jsx)(B,{stateData:s,title:e.state})}n(566);function R(t){var e=t.states;return Object(O.jsx)(w.a,{autoplay:!0,dotPosition:"left",dots:"dot-style",children:e.map((function(t,e){return Object(O.jsx)(N,{state:t},e)}))})}var H=function(){var t=o.a.Content,e=o.a.Footer,n=o.a.Sider,a=Object(c.useState)("1"),s=Object(i.a)(a,2),r=s[0],u=s[1],d=Object(c.useState)([]),l=Object(i.a)(d,2),j=l[0],b=l[1],f=Object(c.useState)([]),h=Object(i.a)(f,2),x=h[0],p=h[1],g=Object(c.useState)([]),y=Object(i.a)(g,2),w=y[0],S=y[1];return Object(c.useEffect)((function(){W().then((function(t){var e=t.states,n=t.constituencies,c=t.candidates;S(e),b(c),p(n)}))}),[]),Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(o.a,{children:[Object(O.jsx)(n,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(t){console.log(t)},onCollapse:function(t,e){console.log(t,e)},children:Object(O.jsx)(v,{page:r,setPage:u})}),"\xa0",Object(O.jsxs)(o.a,{className:"layout",children:[Object(O.jsx)(t,{style:{margin:"24px 16px 0"},children:Object(O.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:"1"===r?Object(O.jsx)(R,{states:w}):"2"===r?Object(O.jsx)(C,{}):"4"===r?Object(O.jsx)(m,{states:w,candidates:j,constituencies:x}):Object(O.jsx)("div",{})})},r),Object(O.jsx)(e,{style:{textAlign:"center"},children:"\xa92021 Sathishkumar Maruthamuthu"})]})]})})},U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,585)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),s(t),r(t)}))};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(H,{})}),document.getElementById("root")),U()}},[[568,1,2]]]);
//# sourceMappingURL=main.adfa987d.chunk.js.map